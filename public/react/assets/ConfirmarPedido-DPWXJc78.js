import{r as t,b as i,j as e,a as h,f}from"./app-CcY4etO7.js";const j=()=>{const[r,n]=t.useState([]),[s,l]=t.useState(""),[c,m]=t.useState(0);t.useEffect(()=>{i.get("/carritos").then(a=>{n(a.data),p(a.data)}).catch(a=>console.error("Error al cargar carrito:",a))},[]);const p=a=>{const o=a.reduce((u,d)=>u+d.producto.precio*d.cantidad,0);m(o)},x=()=>{if(s.trim()===""){alert("Por favor, ingresa una direcciÃ³n de envÃ­o.");return}const a=r.map(o=>({id:o.producto.id,cantidad:o.cantidad,precio:o.producto.precio}));i.post("/pedidos",{direccion_envio:s,total:c,productos:a}).then(()=>{alert("Pedido confirmado. Â¡Gracias por tu compra!"),f.visit("/historial")}).catch(o=>{console.error("Error al confirmar pedido:",o.response?o.response.data:o.message),alert("Hubo un problema al confirmar el pedido.")})};return e.jsxs(e.Fragment,{children:[e.jsx(h,{title:"Confirmar Pedido"}),e.jsxs("div",{className:"min-h-screen bg-gray-100 p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"ðŸ“¦ ConfirmaciÃ³n de Pedido"}),r.length===0?e.jsx("p",{className:"text-gray-600",children:"Tu carrito estÃ¡ vacÃ­o."}):e.jsxs("div",{className:"bg-white p-6 rounded shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Resumen de tu compra"}),r.map(a=>e.jsxs("div",{className:"border-b py-3 flex justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:[a.producto.nombre," (x",a.cantidad,")"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Talla: ",a.producto.talla]})]}),e.jsxs("p",{className:"text-green-700 font-medium",children:["S/. ",(a.producto.precio*a.cantidad).toFixed(2)]})]},a.id)),e.jsxs("p",{className:"mt-4 text-right text-lg font-bold",children:["Total: S/. ",c.toFixed(2)]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block font-medium mb-2",children:"DirecciÃ³n de envÃ­o"}),e.jsx("input",{type:"text",value:s,onChange:a=>l(a.target.value),className:"w-full border px-3 py-2 rounded",placeholder:"Ej. Av. Los HÃ©roes 123, Lima"})]}),e.jsx("button",{onClick:x,className:"mt-4 bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700",children:"Confirmar Pedido"})]})]})]})};export{j as default};
